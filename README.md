
---

# ๐ค **Differential Drive Mobile Robot โ ROS 2 Simulation & Estimation**

ุงู ุฑูพู ุดุงูู ุดุจูโุณุงุฒ ฺฉุงูู ฺฉ **ุฑุจุงุช ูุชุญุฑฺฉ ุฏูุฑุงูุณู** ุฏุฑ ูุญุท **Ignition/Gazebo** ุจู ููุฑุงู ูพุงุฏูโุณุงุฒ ุณุณุชู **ุชุฎูู ูููุนุช ู ุฌูุชโฺฏุฑ (Pose / Orientation Estimation)** ุจุฑ ูพุงูโ ุฏุงุฏูโูุง **IMU** ู **ูุฏู ุญุฑฺฉุช ุงูุฏููุชุฑ** ุฏุฑ **ROS 2** ุงุณุช.

---

## โ๏ธ ฑ. ุณุงุฎุชุงุฑ ูฺฉุงูฺฉ (Robot Kinematics)

ุฑุจุงุช ุจุฑ ุงุณุงุณ ุณุงุฎุชุงุฑ **ุฏูฺุฑุฎ ูุญุฑฺฉ (Differential Drive)** ู ุจุฏููโ **ุงุณุชูุงููโุง** ูุฏูโุณุงุฒ ุดุฏู ุงุณุช.

### ๐น ูุฏูโุณุงุฒ ูฺฉุงูฺฉ โ `URDF / XACRO`

ูุงู URDF ุดุงูู ููฺฉโูุงุ ุฌุฑูุ ุงูุฑุณ ู ููุตูโูุง ฺุฑุฎโูุงุณุช:

| ุฌุฒุก | ุดฺฉู ููุฏุณ | ุงุฑุชูุงุน/ุถุฎุงูุช | ุดุนุงุน |
| :--- | :--- | :--- | :--- |
| `base_link` (ุจุฏูู ุงุตู) | ุงุณุชูุงูู | 0.1 | 0.3 |
| ฺุฑุฎโูุง ูุญุฑฺฉ | ุงุณุชูุงูู | 0.1 | 0.1 |
| ุณูุณูุฑ Lidar | ุงุณุชูุงูู | N/A | 0.1 |
| ุณูุณูุฑ IMU | ุฌุนุจู | 0.02 | 0.05 (ุทูู ร ุนุฑุถ) |

**ูฺฉุงุช ููู ุฏุฑ ูุฏูโุณุงุฒ:**
- ููุงุตู ฺุฑุฎโูุง ุงุฒ ููุน `continuous`
- ุฑุนุงุช ูุงูโฺฏุฐุงุฑ ุงุณุชุงูุฏุงุฑุฏ ROS 2 ุจุฑุง ูุฑูโูุง:  
  `base_link`, `left_wheel_link`, `right_wheel_link`, โฆ

### ๐น ููุงุด ูุฏู ุฏุฑ RViz

```bash
ros2 launch robot_description display.launch.py
````

* ูุฑู ุงุตู (`Global Frame`) ุฑู **`base_link`** ุชูุธู ุดุฏู ุงุณุช.

---

## ๐ก ฒ. ุณูุณูุฑูุง ู ุดุจูโุณุงุฒ (Simulation Setup)

ุณูุณูุฑูุง ููุฑุฏูุงุฒ ูุงูุจุฑ ุงูุฒูุฏู ุดุฏู ู ูพูุงฺฏูโูุง Gazebo ุจุฑุง ุชููุฏ ุฏุงุฏู ูุนุงู ุดุฏูโุงูุฏ.

### ๐น ุญุณฺฏุฑูุง ุงุถุงููโุดุฏู ุฏุฑ URDF

* **Lidar 2D โ** ููุดูโุจุฑุฏุงุฑ ู ุชุนู ูููุนุช ูุณุจ
* **IMU โ** ุฌูุชโฺฏุฑ ู ุณุฑุนุช ุฒุงููโุง
* **ูพูุงฺฏูโูุง โ**
  `libignition-gazebo-imu-system`, `gpu_lidar`, โฆ

### ๐น ููุฏ ุชุจุฏู ูุฑู (Frame Alignment)

ุจุฑุง ุงุตูุงุญ `frame_id` ู ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุฎุฑูุฌ ูุฏุงุฑ:

**ููุฏ:** `frame_id_converter`
โ ุชุทุจู ุจุง ุงุณุชุงูุฏุงุฑุฏ ROS 2 ู ุงุตูุงุญ Topic / Frame ID

### ๐น ุงุฌุฑุง ุดุจูโุณุงุฒ ุฏุฑ Gazebo

```bash
ros2 launch robot_description gazebo.launch.py
```

**ุงู ูุงู ุดุงูู:**

* `gazebo-ros-bridge`
* ูุฑุงุฑ ุฏุงุฏู ุฑุจุงุช ุฏุฑ ูุญุท (`robot spawn`)
* ุงุฌุฑุง RViz
* ุงุฌุฑุง world ูพุดโูุฑุถ

### ๐น ูุงู ูพฺฉุฑุจูุฏ RViz

ูุงู **`gazebo.rviz`** ุจุฑุง ููุงุด ุฒูุฏูโ:

* ูุฏู ุฑุจุงุช
* ุฏุงุฏูโูุง Lidar ู IMU
* ูุฑู TFูุง

---

## ๐งญ ณ. ุชุฎูู ู ูุฏู ุญุฑฺฉุช (Estimation & Motion Model)

ููุฏูุง ุงุตู ุฏุฑ ูพฺฉุฌ `robot_estimation` ูุฑุงุฑ ุฏุงุฑูุฏ.

### ๐น ููุฏูุง ูพุงุฏูโุณุงุฒโุดุฏู

| ูุงุจูุช                | ุชูุถุญ                                         |
| --------------------- | --------------------------------------------- |
| Lowpass Filter        | ฺฉุงูุด ููุฒ IMU                                 |
| Bias Correction       | ุงุตูุงุญ ุฎุทุง ุซุงุจุช ุณูุณูุฑูุง                       |
| Complementary Filter  | ุชุฎูู Orientation โ `/estimation/orientation` |
| Odometry Motion Model | ฺฉูุชุฑู ฺุฑุฎโูุง + ุงูุชุดุงุฑ TF (`odom โ base_link`) |

* ูุฑูุฏ ูุฑูุงู ุญุฑฺฉุช: **`cmd_vel`**
* ุชุจุฏู ุดุฏู ุจู ุณุฑุนุช ฺุฑุฎโูุง: `left_wheel_rpm` / `right_wheel_rpm`

### ๐น ูุงูฺ ููุฏูุง ุชุฎูู

```bash
ros2 launch robot_estimation estimator.launch.py
```

---

## ๐๏ธ ด. ุณุงุฎุช ู ุงุฌุฑุง (Build & Run)

### ๐น ุณุงุฎุช ูพฺฉุฌโูุง

```bash
colcon build --packages-select robot_description robot_estimation
source install/setup.bash
```

### ๐น ุงุฌุฑุง ุณุณุชู ฺฉุงูู

```bash
ros2 launch robot_description gazebo.launch.py
```

---
